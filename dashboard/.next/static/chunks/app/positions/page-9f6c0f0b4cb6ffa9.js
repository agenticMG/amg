(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[217],{7998:(e,t,s)=>{Promise.resolve().then(s.bind(s,8712))},8712:(e,t,s)=>{"use strict";s.d(t,{PositionsTable:()=>c});var r=s(7113),n=s(1565),l=s(8827);function c(){let[e,t]=(0,n.useState)([]),[s,c]=(0,n.useState)([]),{lastMessage:i}=(0,l.S)(),a=()=>{fetch("/api/positions").then(e=>e.json()).then(e=>{t(e.open),c(e.closed)})};(0,n.useEffect)(a,[]),(0,n.useEffect)(()=>{(null==i?void 0:i.type)==="trade"&&a()},[i]);let o=(e,t)=>(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-zinc-400 mb-3",children:t}),(0,r.jsxs)("table",{className:"w-full text-sm mb-6",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left text-xs text-zinc-500 uppercase tracking-wider border-b border-zinc-800",children:[(0,r.jsx)("th",{className:"pb-2 pr-4",children:"Market"}),(0,r.jsx)("th",{className:"pb-2 pr-4",children:"Side"}),(0,r.jsx)("th",{className:"pb-2 pr-4 text-right",children:"Size"}),(0,r.jsx)("th",{className:"pb-2 pr-4 text-right",children:"Leverage"}),(0,r.jsx)("th",{className:"pb-2 pr-4 text-right",children:"Entry"}),t.includes("Closed")&&(0,r.jsx)("th",{className:"pb-2 pr-4 text-right",children:"Exit"}),(0,r.jsx)("th",{className:"pb-2 pr-4 text-right",children:"Collateral"}),(0,r.jsx)("th",{className:"pb-2 pr-4 text-right",children:"P&L"}),(0,r.jsx)("th",{className:"pb-2 pr-4 text-right",children:"Stop Loss"}),(0,r.jsx)("th",{className:"pb-2",children:"Status"})]})}),(0,r.jsxs)("tbody",{children:[e.map(e=>(0,r.jsxs)("tr",{className:"border-b border-zinc-800/50 hover:bg-zinc-800/30",children:[(0,r.jsx)("td",{className:"py-2 pr-4 font-mono text-xs font-medium text-white",children:e.market}),(0,r.jsx)("td",{className:"py-2 pr-4",children:(0,r.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-medium ".concat("long"===e.side?"bg-emerald-900/50 text-emerald-400":"bg-red-900/50 text-red-400"),children:e.side.toUpperCase()})}),(0,r.jsx)("td",{className:"py-2 pr-4 text-right font-mono text-xs",children:e.size.toFixed(4)}),(0,r.jsxs)("td",{className:"py-2 pr-4 text-right font-mono text-xs",children:[e.leverage.toFixed(1),"x"]}),(0,r.jsxs)("td",{className:"py-2 pr-4 text-right font-mono text-xs",children:["$",e.entry_price.toFixed(2)]}),t.includes("Closed")&&(0,r.jsx)("td",{className:"py-2 pr-4 text-right font-mono text-xs",children:null!=e.exit_price?"$".concat(e.exit_price.toFixed(2)):"-"}),(0,r.jsxs)("td",{className:"py-2 pr-4 text-right font-mono text-xs",children:["$",e.collateral.toFixed(2)]}),(0,r.jsx)("td",{className:"py-2 pr-4 text-right font-mono text-xs ".concat(null!=e.realized_pnl?e.realized_pnl>=0?"text-emerald-400":"text-red-400":"text-zinc-600"),children:null!=e.realized_pnl?"".concat(e.realized_pnl>=0?"+":"","$").concat(e.realized_pnl.toFixed(2)):"-"}),(0,r.jsx)("td",{className:"py-2 pr-4 text-right font-mono text-xs",children:null!=e.stop_loss_price?"$".concat(e.stop_loss_price.toFixed(2)):"-"}),(0,r.jsx)("td",{className:"py-2",children:(0,r.jsx)("span",{className:"px-1.5 py-0.5 rounded text-xs ".concat("open"===e.status?"bg-blue-900/50 text-blue-400":"liquidated"===e.status?"bg-red-900/50 text-red-400":"bg-zinc-800 text-zinc-400"),children:e.status})})]},e.id)),0===e.length&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:10,className:"py-8 text-center text-zinc-600",children:"No positions"})})]})]})]});return(0,r.jsxs)("div",{children:[o(e,"Open Positions"),o(s,"Closed Positions")]})}},8827:(e,t,s)=>{"use strict";s.d(t,{S:()=>c,WsProvider:()=>i});var r=s(7113),n=s(1565);let l=(0,n.createContext)({lastMessage:null,connected:!1});function c(){return(0,n.useContext)(l)}function i(e){let{children:t}=e,[s,c]=(0,n.useState)(null),[i,a]=(0,n.useState)(!1),o=(0,n.useRef)(null),d=(0,n.useRef)(void 0),x=(0,n.useCallback)(()=>{let e="https:"===window.location.protocol?"wss:":"ws:",t=new WebSocket("".concat(e,"//").concat(window.location.host));o.current=t,t.onopen=()=>a(!0),t.onclose=()=>{a(!1),d.current=setTimeout(x,3e3)},t.onmessage=e=>{try{let t=JSON.parse(e.data);c(t)}catch(e){}}},[]);return(0,n.useEffect)(()=>(x(),()=>{var e;clearTimeout(d.current),null==(e=o.current)||e.close()}),[x]),(0,r.jsx)(l.Provider,{value:{lastMessage:s,connected:i},children:t})}}},e=>{e.O(0,[345,355,358],()=>e(e.s=7998)),_N_E=e.O()}]);