(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[422],{2104:(e,s,t)=>{Promise.resolve().then(t.bind(t,9661))},8827:(e,s,t)=>{"use strict";t.d(s,{S:()=>a,WsProvider:()=>r});var n=t(7113),c=t(1565);let l=(0,c.createContext)({lastMessage:null,connected:!1});function a(){return(0,c.useContext)(l)}function r(e){let{children:s}=e,[t,a]=(0,c.useState)(null),[r,i]=(0,c.useState)(!1),d=(0,c.useRef)(null),o=(0,c.useRef)(void 0),x=(0,c.useCallback)(()=>{let e="https:"===window.location.protocol?"wss:":"ws:",s=new WebSocket("".concat(e,"//").concat(window.location.host));d.current=s,s.onopen=()=>i(!0),s.onclose=()=>{i(!1),o.current=setTimeout(x,3e3)},s.onmessage=e=>{try{let s=JSON.parse(e.data);a(s)}catch(e){}}},[]);return(0,c.useEffect)(()=>(x(),()=>{var e;clearTimeout(o.current),null==(e=d.current)||e.close()}),[x]),(0,n.jsx)(l.Provider,{value:{lastMessage:t,connected:r},children:s})}},9661:(e,s,t)=>{"use strict";t.d(s,{DecisionsTable:()=>a});var n=t(7113),c=t(1565),l=t(8827);function a(e){let{compact:s=!1}=e,[t,a]=(0,c.useState)([]),[r,i]=(0,c.useState)(new Set),{lastMessage:d}=(0,l.S)(),o=s?5:50;return(0,c.useEffect)(()=>{fetch("/api/decisions?limit=".concat(o)).then(e=>e.json()).then(a)},[o]),(0,c.useEffect)(()=>{(null==d?void 0:d.type)==="decision"&&a(e=>[d.data,...e].slice(0,o))},[d,o]),(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full text-sm",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"text-left text-xs text-zinc-500 uppercase tracking-wider border-b border-zinc-800",children:[(0,n.jsx)("th",{className:"pb-2 pr-4",children:"Time"}),(0,n.jsx)("th",{className:"pb-2 pr-4",children:"Action"}),(0,n.jsx)("th",{className:"pb-2 pr-4",children:"Confidence"}),!s&&(0,n.jsx)("th",{className:"pb-2 pr-4",children:"Reasoning"}),(0,n.jsx)("th",{className:"pb-2",children:"Status"})]})}),(0,n.jsxs)("tbody",{children:[t.map(e=>(0,n.jsxs)("tr",{className:"border-b border-zinc-800/50 hover:bg-zinc-800/30 cursor-pointer",onClick:()=>{var s;return s=e.id,void i(e=>{let t=new Set(e);return t.has(s)?t.delete(s):t.add(s),t})},children:[(0,n.jsx)("td",{className:"py-2 pr-4 font-mono text-xs text-zinc-400",children:new Date(e.timestamp).toLocaleString()}),(0,n.jsx)("td",{className:"py-2 pr-4",children:(0,n.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-zinc-800 text-zinc-300",children:e.action})}),(0,n.jsx)("td",{className:"py-2 pr-4",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-16 h-1.5 bg-zinc-800 rounded-full overflow-hidden",children:(0,n.jsx)("div",{className:"h-full rounded-full ".concat(e.confidence>=.7?"bg-emerald-500":e.confidence>=.4?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(100*e.confidence,"%")}})}),(0,n.jsxs)("span",{className:"text-xs font-mono text-zinc-400",children:[(100*e.confidence).toFixed(0),"%"]})]})}),!s&&(0,n.jsx)("td",{className:"py-2 pr-4 text-xs text-zinc-400 max-w-md",children:r.has(e.id)?(0,n.jsx)("div",{className:"whitespace-pre-wrap",children:e.reasoning}):(0,n.jsxs)("div",{className:"truncate",children:[e.reasoning.slice(0,100),"..."]})}),(0,n.jsxs)("td",{className:"py-2",children:[e.success?(0,n.jsx)("span",{className:"px-1.5 py-0.5 rounded text-xs bg-emerald-900/50 text-emerald-400",children:"OK"}):(0,n.jsx)("span",{className:"px-1.5 py-0.5 rounded text-xs bg-red-900/50 text-red-400",children:"BLOCKED"}),e.dry_run&&(0,n.jsx)("span",{className:"px-1.5 py-0.5 rounded text-xs bg-yellow-900/50 text-yellow-400 ml-1",children:"DRY"})]})]},e.id)),0===t.length&&(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:s?4:5,className:"py-8 text-center text-zinc-600",children:"No decisions yet"})})]})]})})}}},e=>{e.O(0,[345,355,358],()=>e(e.s=2104)),_N_E=e.O()}]);