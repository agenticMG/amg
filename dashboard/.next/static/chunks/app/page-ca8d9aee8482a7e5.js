(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8827:(e,t,s)=>{"use strict";s.d(t,{S:()=>c,WsProvider:()=>a});var n=s(7113),r=s(1565);let l=(0,r.createContext)({lastMessage:null,connected:!1});function c(){return(0,r.useContext)(l)}function a(e){let{children:t}=e,[s,c]=(0,r.useState)(null),[a,i]=(0,r.useState)(!1),o=(0,r.useRef)(null),d=(0,r.useRef)(void 0),x=(0,r.useCallback)(()=>{let e="https:"===window.location.protocol?"wss:":"ws:",t=new WebSocket("".concat(e,"//").concat(window.location.host));o.current=t,t.onopen=()=>i(!0),t.onclose=()=>{i(!1),d.current=setTimeout(x,3e3)},t.onmessage=e=>{try{let t=JSON.parse(e.data);c(t)}catch(e){}}},[]);return(0,r.useEffect)(()=>(x(),()=>{var e;clearTimeout(d.current),null==(e=o.current)||e.close()}),[x]),(0,n.jsx)(l.Provider,{value:{lastMessage:s,connected:a},children:t})}},9099:(e,t,s)=>{Promise.resolve().then(s.bind(s,9661)),Promise.resolve().then(s.bind(s,9647)),Promise.resolve().then(s.bind(s,9344)),Promise.resolve().then(s.bind(s,9915))},9344:(e,t,s)=>{"use strict";s.d(t,{PortfolioChart:()=>c});var n=s(7113),r=s(1565),l=s(8827);function c(){let e=(0,r.useRef)(null),t=(0,r.useRef)(null),c=(0,r.useRef)(null),[a,i]=(0,r.useState)([]),{lastMessage:o}=(0,l.S)();return(0,r.useEffect)(()=>{fetch("/api/portfolio-history?hours=72").then(e=>e.json()).then(e=>i(e))},[]),(0,r.useEffect)(()=>{if((null==o?void 0:o.type)==="snapshot"){let e=o.data;i(t=>[...t,e])}},[o]),(0,r.useEffect)(()=>{if(!e.current||0===a.length)return;let n=!1;return s.e(540).then(s.bind(s,3540)).then(s=>{let{createChart:r,ColorType:l,LineStyle:i}=s;if(n||!e.current)return;t.current&&t.current.remove();let o=r(e.current,{width:e.current.clientWidth,height:300,layout:{background:{type:l.Solid,color:"transparent"},textColor:"#a1a1aa",fontSize:12},grid:{vertLines:{color:"#27272a"},horzLines:{color:"#27272a"}},timeScale:{timeVisible:!0,secondsVisible:!1},rightPriceScale:{borderColor:"#27272a"},crosshair:{horzLine:{style:i.Dashed},vertLine:{style:i.Dashed}}}),d=o.addLineSeries({color:"#10b981",lineWidth:2,priceFormat:{type:"price",precision:2,minMove:.01}}),x=a.map(e=>({time:Math.floor(new Date(e.timestamp).getTime()/1e3),value:e.total_portfolio_value}));d.setData(x),o.timeScale().fitContent(),t.current=o,c.current=d;let u=()=>{e.current&&o.applyOptions({width:e.current.clientWidth})};return window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)}),()=>{n=!0}},[a]),(0,n.jsxs)("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-4",children:[(0,n.jsx)("h2",{className:"text-sm font-medium text-zinc-400 mb-3",children:"Portfolio Value"}),(0,n.jsx)("div",{ref:e}),0===a.length&&(0,n.jsx)("div",{className:"h-[300px] flex items-center justify-center text-zinc-600 text-sm",children:"No data yet"})]})}},9647:(e,t,s)=>{"use strict";s.d(t,{KpiCards:()=>i});var n=s(7113),r=s(1565),l=s(8827);function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e.toLocaleString("en-US",{minimumFractionDigits:t,maximumFractionDigits:t})}function a(e){let{label:t,value:s,sub:r,color:l}=e;return(0,n.jsxs)("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-4",children:[(0,n.jsx)("p",{className:"text-xs text-zinc-500 uppercase tracking-wider mb-1",children:t}),(0,n.jsx)("p",{className:"text-2xl font-mono font-bold ".concat(l||"text-white"),children:s}),r&&(0,n.jsx)("p",{className:"text-xs text-zinc-500 mt-1",children:r})]})}function i(){var e,t,s,i,o;let[d,x]=(0,r.useState)(null),{lastMessage:u}=(0,l.S)();if((0,r.useEffect)(()=>{fetch("/api/overview").then(e=>e.json()).then(x)},[]),(0,r.useEffect)(()=>{((null==u?void 0:u.type)==="snapshot"||(null==u?void 0:u.type)==="trade")&&fetch("/api/overview").then(e=>e.json()).then(x)},[u]),!d)return(0,n.jsx)("div",{className:"grid grid-cols-5 gap-4",children:Array.from({length:5}).map((e,t)=>(0,n.jsx)("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-4 h-24 animate-pulse"},t))});let p=null==(e=d.snapshot)?void 0:e.daily_pnl_pct,h=(null!=p?p:0)>=0?"text-emerald-400":"text-red-400";return(0,n.jsxs)("div",{className:"grid grid-cols-5 gap-4",children:[(0,n.jsx)(a,{label:"Portfolio Value",value:"$".concat(c(null!=(i=null==(t=d.snapshot)?void 0:t.total_portfolio_value)?i:0))}),(0,n.jsx)(a,{label:"SOL Balance",value:c(null!=(o=null==(s=d.snapshot)?void 0:s.sol_balance)?o:0,4),sub:"SOL"}),(0,n.jsx)(a,{label:"Daily P&L",value:"".concat((null!=p?p:0)>=0?"+":"").concat(c(null!=p?p:0),"%"),sub:"$".concat(c(d.pnlToday)),color:h}),(0,n.jsx)(a,{label:"Open Positions",value:String(d.openPositions),sub:"".concat(d.tradesToday," trades today")}),(0,n.jsx)(a,{label:"Total Fees Claimed",value:"$".concat(c(d.totalFeesClaimed))})]})}},9661:(e,t,s)=>{"use strict";s.d(t,{DecisionsTable:()=>c});var n=s(7113),r=s(1565),l=s(8827);function c(e){let{compact:t=!1}=e,[s,c]=(0,r.useState)([]),[a,i]=(0,r.useState)(new Set),{lastMessage:o}=(0,l.S)(),d=t?5:50;return(0,r.useEffect)(()=>{fetch("/api/decisions?limit=".concat(d)).then(e=>e.json()).then(c)},[d]),(0,r.useEffect)(()=>{(null==o?void 0:o.type)==="decision"&&c(e=>[o.data,...e].slice(0,d))},[o,d]),(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full text-sm",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"text-left text-xs text-zinc-500 uppercase tracking-wider border-b border-zinc-800",children:[(0,n.jsx)("th",{className:"pb-2 pr-4",children:"Time"}),(0,n.jsx)("th",{className:"pb-2 pr-4",children:"Action"}),(0,n.jsx)("th",{className:"pb-2 pr-4",children:"Confidence"}),!t&&(0,n.jsx)("th",{className:"pb-2 pr-4",children:"Reasoning"}),(0,n.jsx)("th",{className:"pb-2",children:"Status"})]})}),(0,n.jsxs)("tbody",{children:[s.map(e=>(0,n.jsxs)("tr",{className:"border-b border-zinc-800/50 hover:bg-zinc-800/30 cursor-pointer",onClick:()=>{var t;return t=e.id,void i(e=>{let s=new Set(e);return s.has(t)?s.delete(t):s.add(t),s})},children:[(0,n.jsx)("td",{className:"py-2 pr-4 font-mono text-xs text-zinc-400",children:new Date(e.timestamp).toLocaleString()}),(0,n.jsx)("td",{className:"py-2 pr-4",children:(0,n.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-zinc-800 text-zinc-300",children:e.action})}),(0,n.jsx)("td",{className:"py-2 pr-4",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-16 h-1.5 bg-zinc-800 rounded-full overflow-hidden",children:(0,n.jsx)("div",{className:"h-full rounded-full ".concat(e.confidence>=.7?"bg-emerald-500":e.confidence>=.4?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(100*e.confidence,"%")}})}),(0,n.jsxs)("span",{className:"text-xs font-mono text-zinc-400",children:[(100*e.confidence).toFixed(0),"%"]})]})}),!t&&(0,n.jsx)("td",{className:"py-2 pr-4 text-xs text-zinc-400 max-w-md",children:a.has(e.id)?(0,n.jsx)("div",{className:"whitespace-pre-wrap",children:e.reasoning}):(0,n.jsxs)("div",{className:"truncate",children:[e.reasoning.slice(0,100),"..."]})}),(0,n.jsxs)("td",{className:"py-2",children:[e.success?(0,n.jsx)("span",{className:"px-1.5 py-0.5 rounded text-xs bg-emerald-900/50 text-emerald-400",children:"OK"}):(0,n.jsx)("span",{className:"px-1.5 py-0.5 rounded text-xs bg-red-900/50 text-red-400",children:"BLOCKED"}),e.dry_run&&(0,n.jsx)("span",{className:"px-1.5 py-0.5 rounded text-xs bg-yellow-900/50 text-yellow-400 ml-1",children:"DRY"})]})]},e.id)),0===s.length&&(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:t?4:5,className:"py-8 text-center text-zinc-600",children:"No decisions yet"})})]})]})})}},9915:(e,t,s)=>{"use strict";s.d(t,{TradesTable:()=>a});var n=s(7113),r=s(1565),l=s(8827);function c(e){let{sig:t}=e;return t?(0,n.jsxs)("a",{href:"https://solscan.io/tx/".concat(t),target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 font-mono text-xs",children:[t.slice(0,8),"..."]}):(0,n.jsx)("span",{className:"text-zinc-600",children:"-"})}function a(e){let{compact:t=!1}=e,[s,a]=(0,r.useState)([]),{lastMessage:i}=(0,l.S)(),o=t?10:50;return(0,r.useEffect)(()=>{fetch("/api/trades?limit=".concat(o)).then(e=>e.json()).then(a)},[o]),(0,r.useEffect)(()=>{(null==i?void 0:i.type)==="trade"&&a(e=>[i.data,...e].slice(0,o))},[i,o]),(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full text-sm",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"text-left text-xs text-zinc-500 uppercase tracking-wider border-b border-zinc-800",children:[(0,n.jsx)("th",{className:"pb-2 pr-4",children:"Time"}),(0,n.jsx)("th",{className:"pb-2 pr-4",children:"Action"}),(0,n.jsx)("th",{className:"pb-2 pr-4",children:"From"}),(0,n.jsx)("th",{className:"pb-2 pr-4",children:"To"}),(0,n.jsx)("th",{className:"pb-2 pr-4 text-right",children:"Price"}),(0,n.jsx)("th",{className:"pb-2 pr-4 text-right",children:"P&L"}),(0,n.jsx)("th",{className:"pb-2 pr-4",children:"Tx"}),!t&&(0,n.jsx)("th",{className:"pb-2",children:"Status"})]})}),(0,n.jsxs)("tbody",{children:[s.map(e=>(0,n.jsxs)("tr",{className:"border-b border-zinc-800/50 hover:bg-zinc-800/30",children:[(0,n.jsx)("td",{className:"py-2 pr-4 font-mono text-xs text-zinc-400",children:new Date(e.timestamp).toLocaleString()}),(0,n.jsx)("td",{className:"py-2 pr-4",children:(0,n.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-zinc-800 text-zinc-300",children:e.action})}),(0,n.jsx)("td",{className:"py-2 pr-4 font-mono text-xs",children:null!=e.input_amount?"".concat(e.input_amount.toFixed(4)," ").concat(e.input_token):"-"}),(0,n.jsx)("td",{className:"py-2 pr-4 font-mono text-xs",children:null!=e.output_amount?"".concat(e.output_amount.toFixed(4)," ").concat(e.output_token):"-"}),(0,n.jsx)("td",{className:"py-2 pr-4 text-right font-mono text-xs",children:null!=e.executed_price?"$".concat(e.executed_price.toFixed(4)):"-"}),(0,n.jsx)("td",{className:"py-2 pr-4 text-right font-mono text-xs ".concat(null!=e.pnl?e.pnl>=0?"text-emerald-400":"text-red-400":"text-zinc-600"),children:null!=e.pnl?"".concat(e.pnl>=0?"+":"","$").concat(e.pnl.toFixed(2)):"-"}),(0,n.jsx)("td",{className:"py-2 pr-4",children:(0,n.jsx)(c,{sig:e.tx_signature})}),!t&&(0,n.jsxs)("td",{className:"py-2",children:[e.dry_run&&(0,n.jsx)("span",{className:"px-1.5 py-0.5 rounded text-xs bg-yellow-900/50 text-yellow-400",children:"DRY"}),!e.success&&(0,n.jsx)("span",{className:"px-1.5 py-0.5 rounded text-xs bg-red-900/50 text-red-400 ml-1",children:"FAILED"})]})]},e.id)),0===s.length&&(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:t?7:8,className:"py-8 text-center text-zinc-600",children:"No trades yet"})})]})]})})}}},e=>{e.O(0,[345,355,358],()=>e(e.s=9099)),_N_E=e.O()}]);